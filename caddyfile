(cors) {
	@cors_preflight method OPTIONS

	header {
		Access-Control-Allow-Origin "{header.origin}"
		Vary Origin
		Access-Control-Expose-Headers "Authorization"
		Access-Control-Allow-Credentials "true"
	}

	handle @cors_preflight {
		header {
			Access-Control-Allow-Methods "GET, POST, PUT, PATCH, DELETE"
			Access-Control-Max-Age "3600"
		}
		respond "" 204
	}
}

portainer.nashor.home {
    reverse_proxy https://portainer:9443 {
        transport http {
            tls_insecure_skip_verify
        }
    }
    tls internal
}

pihole.nashor.home {
    reverse_proxy https://pihole {
        transport http {
            tls_insecure_skip_verify
        }
    }
    tls internal
}

status.nashor.home {
    reverse_proxy uptime-kuma:3001
    tls internal

    import cors {header.origin}
}

homebridge.nashor.home {
    reverse_proxy http://nashor.home:8581
    tls internal
}

vaultwarden.nashor.home {
	reverse_proxy http://vaultwarden:80
	tls internal
}

dashboard.nashor.home {
    reverse_proxy homer:8080
    tls internal

    import cors {header.origin}
}

kestra.nashor.home {
	reverse_proxy http://kestra:8080
	tls internal
}